<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three-Tier Network Configuration</title>
    <style>
        :root {
            --bg-color: #f4f4f4;
            --text-color: #333;
            --h2-color: #555;
            --nav-bg: #f8f8f8;
            --nav-text: #333;
            --section-bg: white;
            --pre-bg: #f8f8f8;
            --note-bg: #e7f3ff;
            --border-color: #007bff;
            --copy-btn-bg: #007bff;
            --copy-btn-hover: #0056b3;
            --shadow: rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --h2-color: #bbb;
            --nav-bg: #1e1e1e;
            --nav-text: #e0e0e0;
            --section-bg: #1e1e1e;
            --pre-bg: #2d2d2d;
            --note-bg: #1a3a5c;
            --border-color: #4a9eff;
            --copy-btn-bg: #4a9eff;
            --copy-btn-hover: #2a7bff;
            --shadow: rgba(255,255,255,0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            max-width: 1200px;
            margin: 0 auto;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        h1 {
            color: var(--text-color);
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        h2 {
            color: var(--h2-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 5px;
            font-size: 1.8em;
            font-weight: 400;
        }
        nav {
            background-color: var(--nav-bg);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        nav h3 {
            margin-top: 0;
            color: var(--nav-text);
            margin-bottom: 10px;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        nav li {
            margin: 8px 0;
        }
        nav a {
            color: var(--border-color);
            text-decoration: none;
            transition: color 0.3s;
        }
        nav a:hover {
            text-decoration: underline;
            color: var(--copy-btn-hover);
        }
        .theme-toggle {
            background: var(--copy-btn-bg);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .theme-toggle:hover {
            background: var(--copy-btn-hover);
        }
        .section {
            background-color: var(--section-bg);
            padding: 25px;
            margin-bottom: 25px;
            margin-top: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            transition: background-color 0.3s;
        }
        .code-container {
            position: relative;
        }
        pre {
            background-color: var(--pre-bg);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 14px;
            margin: 0;
            color: var(--text-color);
            transition: background-color 0.3s;
        }
        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--copy-btn-bg);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        .copy-btn:hover {
            background-color: var(--copy-btn-hover);
        }
        .note {
            background-color: var(--note-bg);
            padding: 15px;
            border-left: 5px solid var(--border-color);
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            h1 {
                font-size: 2em;
            }
            h2 {
                font-size: 1.5em;
            }
            nav {
                flex-direction: column;
                align-items: stretch;
            }
            .theme-toggle {
                align-self: flex-end;
                margin-top: 10px;
            }
            .section {
                padding: 20px;
            }
            pre {
                font-size: 12px;
                padding: 15px;
            }
            .copy-btn {
                font-size: 10px;
                padding: 4px 8px;
            }
        }
    </style>
</head>
<body>
    <h1>Network Configuration for Three-Tier Architecture</h1>
    <p>This page contains the updated Huawei device configurations for 2 core switches, 1 router, and 2 access switches, creating a three-tier network topology. Core switches handle DHCP, inter-VLAN routing, and gateway redundancy with VRRP (Core1 primary, Core2 secondary). The router is configured for WAN routing, NAT, and internet access.</p>

    <nav id="toc">
        <div>
            <h3>Table of Contents</h3>
            <ul>
                <li><a href="#core1">Step 1: Core Switch 1 Configuration</a></li>
                <li><a href="#core2">Step 2: Core Switch 2 Configuration</a></li>
                <li><a href="#router1">Step 3: Router 1 Configuration</a></li>
                <li><a href="#access1">Step 4: Access Switch 1 Configuration</a></li>
                <li><a href="#access2">Step 5: Access Switch 2 Configuration</a></li>
                <li><a href="#verification">Step 6: Verification</a></li>
            </ul>
        </div>
        <button class="theme-toggle" id="theme-toggle">Toggle Dark Mode</button>
    </nav>

    <div class="note">
        <strong>Physical Connections:</strong> Router1 GE0/0/0 ↔ Core1 GE0/0/1, Router1 GE0/0/2 ↔ Core2 GE1/0/2, Core1 GE1/0/2 ↔ Access1 GE0/0/1, Core2 GE0/0/3 ↔ Access2 GE0/0/1, Core1 Ethernet0/0/4 ↔ Core2 Ethernet0/0/4 (trunk). VLANs 10 and 20. Core switches handle DHCP, inter-VLAN routing, and gateway with VRRP (Core1 primary, Core2 secondary).
    </div>

    <div class="section">
        <h2 id="core1">Step 1: Core Switch 1 Configuration</h2>
        <p>Apply this full configuration to Core Switch 1.</p>
        <div class="code-container">
        <pre>
system-view

# Enable STP for redundancy
stp enable

# Enable IP routing
ip routing enable

# Create VLAN 10
vlan 10
quit

# Create VLAN 20
vlan 20
quit

# Configure VLAN interface for VLAN 10 with VRRP
interface Vlanif10
ip address 192.168.10.2 255.255.255.0
vrrp vrid 1 virtual-ip 192.168.10.1
vrrp vrid 1 priority 150
quit

# Configure VLAN interface for VLAN 20 with VRRP
interface Vlanif20
ip address 192.168.20.2 255.255.255.0
vrrp vrid 1 virtual-ip 192.168.20.1
vrrp vrid 1 priority 150
quit

# Enable DHCP
dhcp enable

# Create DHCP pool for VLAN 10
ip pool vlan10
network 192.168.10.0 mask 255.255.255.0
gateway-list 192.168.10.1
dns-list 8.8.8.8
quit

# Create DHCP pool for VLAN 20
ip pool vlan20
network 192.168.20.0 mask 255.255.255.0
gateway-list 192.168.20.1
dns-list 8.8.8.8
quit

# Apply DHCP to VLAN interfaces
interface Vlanif10
dhcp select global
quit

interface Vlanif20
dhcp select global
quit

# Configure trunk port to Router1 (Ethernet0/0/1)
interface Ethernet0/0/1
port link-type trunk
port trunk allow-pass vlan 10 20
quit

# Configure trunk port to Access Switch 1 (Ethernet1/0/2)
interface Ethernet1/0/2
port link-type trunk
port trunk allow-pass vlan 10 20
quit

# Configure trunk port to Core Switch 2 (Ethernet0/0/4)
interface Ethernet0/0/4
port link-type trunk
port trunk allow-pass vlan 10 20
stp disable
quit

# Save configuration
save
        </pre>
        <button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">Copy Code</button>
        </div>
    </div>

    <div class="section">
        <h2 id="core2">Step 2: Core Switch 2 Configuration</h2>
        <p>Apply this full configuration to Core Switch 2.</p>
        <div class="code-container">
        <pre>
system-view

# Enable STP for redundancy
stp enable

# Enable IP routing
ip routing enable

# Create VLAN 10
vlan 10
quit

# Create VLAN 20
vlan 20
quit

# Configure VLAN interface for VLAN 10 with VRRP
interface Vlanif10
ip address 192.168.10.3 255.255.255.0
vrrp vrid 1 virtual-ip 192.168.10.1
vrrp vrid 1 priority 100
quit

# Configure VLAN interface for VLAN 20 with VRRP
interface Vlanif20
ip address 192.168.20.3 255.255.255.0
vrrp vrid 1 virtual-ip 192.168.20.1
vrrp vrid 1 priority 100
quit

# Enable DHCP
dhcp enable

# Create DHCP pool for VLAN 10
ip pool vlan10
network 192.168.10.0 mask 255.255.255.0
gateway-list 192.168.10.1
dns-list 8.8.8.8
quit

# Create DHCP pool for VLAN 20
ip pool vlan20
network 192.168.20.0 mask 255.255.255.0
gateway-list 192.168.20.1
dns-list 8.8.8.8
quit

# Apply DHCP to VLAN interfaces
interface Vlanif10
dhcp select global
quit

interface Vlanif20
dhcp select global
quit

# Configure trunk port to Router1 (gigabitethernet0/0/1)
interface gigabitethernet0/0/1
port link-type trunk
port trunk allow-pass vlan 10 20
quit
# Configure trunk port to Access Switch 2 (gigabitethernet0/0/4)
interface gigabitethernet0/0/4
port link-type trunk
port trunk allow-pass vlan 10 20
quit

# Configure trunk port to Core Switch 1 (Ethernet0/0/4)
interface gigabitEthernet0/0/4
port link-type trunk
port trunk allow-pass vlan 10 20
stp disable
quit

# Save configuration
save
        </pre>
        <button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">Copy Code</button>
        </div>
    </div>

    <div class="section">
        <h2 id="router1">Step 3: Router 1 Configuration</h2>
        <p>Apply this configuration to Router 1 for WAN routing, NAT, and internet access. Physical interfaces are enabled but VLAN subinterfaces removed as inter-VLAN routing is handled by core switches.</p>
        <div class="code-container">
        <pre>
system-view

# Remove existing subinterfaces if any
undo interface GigabitEthernet0/0/0.10
undo interface GigabitEthernet0/0/0.20
undo interface GigabitEthernet0/0/2.10
undo interface GigabitEthernet0/0/2.20

# Remove DHCP pools
undo ip pool LAN10
undo ip pool VLAN20

# Disable DHCP (if no longer needed elsewhere)
undo dhcp enable

# Enable physical interfaces
interface GigabitEthernet0/0/0
undo shutdown
quit

interface GigabitEthernet0/0/2
undo shutdown
quit

# Save configuration
save
        </pre>
        <button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">Copy Code</button>
        </div>
    </div>


    <div class="section">
        <h2 id="access1">Step 5: Access Switch 1 Configuration</h2>
        <p>Apply this full configuration to Access Switch 1.</p>
        <div class="code-container">
        <pre>
system-view

# Enable STP for redundancy
stp enable

# Create VLAN 10
vlan 10
quit

# Create VLAN 20
vlan 20
quit

# Configure trunk port to Core Switch 1 (GigabitEthernet0/0/1)
interface Ethernet0/0/2
port link-type trunk
port trunk allow-pass vlan 10 20
quit

# Configure access ports for VLAN 10 
port-group 1
group-member Ethernet0/0/3 to Ethernet0/0/4
port link-type access
port default vlan 10
quit

# Configure access ports for VLAN 20 
port-group 2
group-member Ethernet0/0/6 to Ethernet0/0/8
port link-type access
port default vlan 20
quit

# Save configuration
save
        </pre>
        <button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">Copy Code</button>
        </div>
    </div>

    <div class="section">
        <h2 id="access2">Step 6: Access Switch 2 Configuration</h2>
        <p>Apply this full configuration to Access Switch 2.</p>
        <div class="code-container">
        <pre>
system-view

# Enable STP for redundancy
stp enable

# Create VLAN 10
vlan 10
quit

# Create VLAN 20
vlan 20
quit

# Configure trunk port to Core Switch 2 (GigabitEthernet0/0/1)
interface GigabitEthernet0/0/1
port link-type trunk
port trunk allow-pass vlan 10 20
quit

# Configure access ports for VLAN 10 (example: ports 2-10)
port-group 1
group-member Ethernet0/0/3 to Ethernet0/0/4
port link-type access
port default vlan 10
quit

# Configure access ports for VLAN 20 (example: ports 11-20)
port-group 2
group-member Ethernet0/0/5 to Ethernet0/0/8
port link-type access
port default vlan 20
quit

# Save configuration
save
        </pre>
        <button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">Copy Code</button>
        </div>
    </div>

    <div class="section">
        <h2 id="verification">Step 7: Verification</h2>
        <ul>
            <li>Verify trunk ports: Use <code>display interface Ethernet0/0/x</code> on each device.</li>
            <li>Check VLANs: Use <code>display vlan</code>.</li>
            <li>Verify STP: Use <code>display stp brief</code> to ensure no loops.</li>
            <li>Check VRRP: Use <code>display vrrp</code> to verify redundancy.</li>
            <li>Check DHCP pools: Use <code>display ip pool</code>.</li>
            <li>Check routing table: Use <code>display ip routing-table</code>.</li>
            <li>Test DHCP: Connect a device to an access port and verify IP assignment.</li>
            <li>Test connectivity: Ping between VLANs (e.g., from VLAN10 to VLAN20).</li>
            <li>Test redundancy: Disconnect one core switch and verify failover.</li>
        </ul>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                alert('Code copied to clipboard!');
            }, function(err) {
                console.error('Could not copy text: ', err);
            });
        }

        // Dark mode toggle
        const themeToggle = document.getElementById('theme-toggle');
        const body = document.body;

        // Check for saved theme preference or default to light mode
        const currentTheme = localStorage.getItem('theme') || 'light';
        body.setAttribute('data-theme', currentTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeToggle.textContent = newTheme === 'dark' ? 'Toggle Light Mode' : 'Toggle Dark Mode';
        });

        // Set initial button text
        themeToggle.textContent = currentTheme === 'dark' ? 'Toggle Light Mode' : 'Toggle Dark Mode';
    </script>
</body>
</html>